<!DOCTYPE html>
<html lang="en">
    <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
    <head>
    <meta charset="utf-8" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover" name="viewport">

    <title>
         Bouncing 
    </title>

    <meta name="author" content="Theo Dedeken" /> 

    <link rel="alternate" type="application/rss+xml" title="Game I/O - Game development workshops" href="hubben-amal.github.io/game-io-workshops/feed.xml" /> 
 
 
   
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />

    
    <link rel="stylesheet" href="/game-io-workshops/css/bootstrap.min.css" /> 
    <link rel="stylesheet" href="/game-io-workshops/css/bootstrap-social.css" /> 
    <link rel="stylesheet" href="/game-io-workshops/css/main.css" />    
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" /> 
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" />     

    <!-- Facebook OpenGraph tags -->
     
    <meta property="og:title" content="Bouncing" />  
    <meta property="og:description" content="We have all our elements on the screen but not much is happening yet. Let's change this by making our ball bounce when we press the spacebar. ## Getting the spacebar To perform an action when the spacebar is pressed we first need to capture it. In Phaser we can..."> 


    <meta content="website" property="og:type" /> 
    <meta property="og:url" content="hubben-amal.github.io/game-io-workshops/workshops/w1/exercise/step_4/" />
    <link rel="canonical" href="hubben-amal.github.io/game-io-workshops/workshops/w1/exercise/step_4/" />  
    <meta property="og:image" content="hubben-amal.github.io/game-io-workshops/img/game-io-logo.png" /> 


    <!-- Twitter summary cards -->
    <meta content="summary" name="twitter:card" />
    <meta content="@" name="twitter:site" />
    <meta content="@" name="twitter:creator" /> 
    <meta name="twitter:title" content="Bouncing" />  
    <meta name="twitter:description" content="We have all our elements on the screen but not much is happening yet. Let's change this by making our ball bounce when we press the spacebar. ## Getting the spacebar To perform an action when the spacebar is pressed we first need to capture it. In Phaser we can...">  
    <meta name="twitter:image" content="hubben-amal.github.io/game-io-workshops/img/game-io-logo.png" />   

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href=/game-io-workshops/apple-icon-57x57.png ">
    <link rel="apple-touch-icon " sizes="60x60 " href=/game-io-workshops/apple-icon-60x60.png ">
    <link rel="apple-touch-icon" sizes="72x72" href=/game-io-workshops/apple-icon-72x72.png ">
    <link rel="apple-touch-icon " sizes="76x76 " href=/game-io-workshops/apple-icon-76x76.png ">
    <link rel="apple-touch-icon" sizes="114x114" href=/game-io-workshops/apple-icon-114x114.png ">
    <link rel="apple-touch-icon " sizes="120x120 " href=/game-io-workshops/apple-icon-120x120.png ">
    <link rel="apple-touch-icon" sizes="144x144" href=/game-io-workshops/apple-icon-144x144.png ">
    <link rel="apple-touch-icon " sizes="152x152 " href=/game-io-workshops/apple-icon-152x152.png ">
    <link rel="apple-touch-icon" sizes="180x180" href=/game-io-workshops/apple-icon-180x180.png ">
    <link rel="icon " type="image/png " sizes="192x192 " href=/game-io-workshops/android-icon-192x192.png ">
    <link rel="icon" type="image/png" sizes="32x32" href=/game-io-workshops/favicon-32x32.png ">
    <link rel="icon " type="image/png " sizes="96x96 " href=/game-io-workshops/favicon-96x96.png ">
    <link rel="icon" type="image/png" sizes="16x16" href=/game-io-workshops/favicon-16x16.png ">
    <link rel="manifest " href=/game-io-workshops/manifest.json ">
    <meta content="#ffffff" name="msapplication-TileColor">
    <meta name="msapplication-TileImage" content=/game-io-workshops/ms-icon-144x144.png ">
    <meta content="#ffffff " name="theme-color ">

</head>

    <body>

        


        <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
    <div class="container-fluid">
        <div class="navbar-header">
            <button class="navbar-toggle" data-target="#main-navbar" data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button><a class="navbar-brand" href="/game-io-workshops/">Game I/O</a></div>

        <div class="collapse navbar-collapse" id="main-navbar">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/game-io-workshops/schedule">Schedule</a>
                </li>
                <li class="navlinks-container">
                    <a class="navlinks-parent" href="javascript:void(0)">Workshops</a>
                    <div class="navlinks-children">
                        <a href="/game-io-workshops/workshops/w1/index">W1 - Basics</a>
                        <a href="/game-io-workshops/workshops/w2/index">W2 - Phaser Systems</a>
                    </div>
                </li>
                
                <li class="navlinks-container">
                    <a class="navlinks-parent" href="javascript:void(0)">Additional resources</a>
                    <div class="navlinks-children">
                        <a href="/game-io-workshops/additional/javascript">Learning Javascript</a>
                        <a href="/game-io-workshops/additional/documentation">Phaser documentation</a>
                        <a href="/game-io-workshops/additional/tutorials">Extra tutorials</a>
                        <a href="/game-io-workshops/additional/quickstart">Phaser quickstart</a>
                        <a href="/game-io-workshops/additional/games">Programming games</a>
                    </div>
                </li>
                
                <li>
                    <a href="https://www.theodedeken.xyz">Author's home</a>
                </li></ul>
        </div>

        
        <div class="avatar-container">
            <div class="avatar-img-border">
                <a href="/game-io-workshops/">
                    <img class="avatar-img" src="/game-io-workshops/img/game-io-logo.png" />
                </a>
            </div>
        </div>
        

    </div>
</nav>

        <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-heading">
          <h1>Bouncing</h1>
		  
		  
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p>We have all our elements on the screen but not much is happening yet.
Let’s change this by making our ball bounce when we press the spacebar.</p>

<h2 id="getting-the-spacebar">Getting the spacebar</h2>
<p>To perform an action when the spacebar is pressed we first need to capture it. 
In Phaser we can get capture any key by calling <code class="highlighter-rouge">this.input.keyboard.addKey(key)</code>, with <code class="highlighter-rouge">key</code> the keycode of the required key.
This returns an object we can then use to check if the key is pressed.
These keycodes are included in the engine and the keycode for the spacebar can be found in <code class="highlighter-rouge">Phaser.Input.KeyBoard.KeyCodes.SPACE</code>.</p>

<p>Putting this all together we can create a capture for the spacebar by adding this line to the <code class="highlighter-rouge">create</code> function.
<strong>Don’t forget to also declare the variable <code class="highlighter-rouge">space</code> outside of the create function so we can use it in other functions</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">space</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">input</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">.</span><span class="nx">addKey</span><span class="p">(</span><span class="nx">Phaser</span><span class="p">.</span><span class="nx">Input</span><span class="p">.</span><span class="nx">Keyboard</span><span class="p">.</span><span class="nx">KeyCodes</span><span class="p">.</span><span class="nx">SPACE</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="checking-the-state-of-the-spacebar">Checking the state of the spacebar</h2>
<p>Now that we have our spacebar we need to check when it is pressed down.
This is available as a boolean as an attribute of the key (<code class="highlighter-rouge">space.isDown</code>).</p>

<p>But this check needs to happen multiple times as we have no idea when exactly the spacebar will be pressed down and we don’t want to miss it.
For this problem we will turn to another default function in Phaser called <code class="highlighter-rouge">update</code>.
This function is called everytime the game updates, which is 60 times per second. 
This will make sure we won’t miss the spacebar being pressed.</p>

<p>To make the ball bounce we will just teleport it up for now by changing its position. 
This can be done via the <code class="highlighter-rouge">setPosition(x, y)</code> function.
Together this looks like this.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
* Main update loop
* The code in this function gets executed on every game update (default 60 times per second)
*
* Use this function for all elements that change overtime
*/</span>
<span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">isDown</span><span class="p">){</span>
        <span class="nx">jump</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">jump</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// jump as in teleport the ball up with 150 pixels</span>
    <span class="nx">ball</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">150</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Also update the config object to link to our update function</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="c1">// Leave the rest of config untouched and update the </span>
    <span class="c1">// lines under this message</span>

    <span class="c1">// Linking script functions to the engine events</span>
    <span class="na">scene</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">create</span><span class="p">:</span> <span class="nx">create</span><span class="p">,</span>
        <span class="na">update</span><span class="p">:</span> <span class="nx">update</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="falling-down">Falling down</h2>
<p>The previous code has a serious omission: <strong>There is no falling down yet!</strong>.
So the ball just takes off, faster than you can see.
Let’s change this by adding code to drop the ball down after some time and to lock your ability to jump again when you are still in the air.</p>

<p>We will use a simple boolean variable to keep the state whether we are jumping (<code class="highlighter-rouge">true</code>) or on the ground (<code class="highlighter-rouge">false</code>).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Declare jumping state</span>
<span class="kd">let</span> <span class="nx">jumping</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// check first if we aren't already jumping</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jumping</span> <span class="o">&amp;&amp;</span> <span class="nx">space</span><span class="p">.</span><span class="nx">isDown</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jump</span><span class="p">();</span>        
    <span class="p">}</span> 
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">jump</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// jump as in teleport the ball up with 150 pixels</span>
    <span class="nx">ball</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">150</span><span class="p">);</span>
    <span class="c1">// set jumping state to true so we can only jump once</span>
    <span class="nx">jumping</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="c1">// Javascript construct to call a function in the future</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">dropDown</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">dropDown</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// reset the position of the ball</span>
    <span class="nx">ball</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="mi">150</span><span class="p">);</span>
    <span class="c1">// after dropping down we can jump again</span>
    <span class="nx">jumping</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="making-jumping-a-bit-harder">Making jumping a bit harder</h2>
<p>If we run our script now you might notice that it is very easy to just keep pressing the spacebar to stay in the air perpetually.
To change this we should lock the ability to jump again until the player has released the spacebar.
We can check this by looking at the boolean in <code class="highlighter-rouge">space.isUp</code>.</p>

<p>The <code class="highlighter-rouge">update</code> and <code class="highlighter-rouge">jump</code> functions should now look something like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Declare keylock state</span>
<span class="kd">let</span> <span class="nx">keylock</span> <span class="o">=</span> <span class="kc">false</span>

<span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jumping</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// we can only jump if space is down and isn't locked</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">isDown</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">keylock</span><span class="p">){</span>
            <span class="nx">jump</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="c1">// unlock space</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">isUp</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">keylock</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>             
    <span class="p">}</span> 
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">jump</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// jump as in teleport the ball up with 150 pixels</span>
    <span class="nx">ball</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="nx">ball</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">150</span><span class="p">);</span>
    <span class="c1">// set jumping state to true so we can only jump once</span>
    <span class="nx">jumping</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="c1">// lock our spacebar</span>
    <span class="nx">keylock</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="c1">// Javascript construct to call a function in the future</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">dropDown</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Feel free to experiment with jump height and airtime by changing the values.</p>

        <ul class="pager blog-pager">
        
        <li class="previous">
            <a href="/game-io-workshops/workshops/w1/exercise/step_3" data-toggle="tooltip" data-placement="top" title="Previous step">&larr; Previous Step</a>
        </li>
        
        
        <li class="next">
            <a href="/game-io-workshops/workshops/w1/exercise/step_5" data-toggle="tooltip" data-placement="top" title="Next step">Next Step &rarr;</a>
        </li>
        
        </ul>
    </div>
  </div>
</div>




        <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/game-io-workshops/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="mailto:theo.dedeken@amal.se" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li><li><a href="https://github.com/theodedeken" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li><li><a href="https://twitter.com/theodedeken" title="Twitter"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Twitter</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Theo Dedeken
      &nbsp;&bull;&nbsp;
      2020

      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="https://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>


        


  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
          document.write('<script src="/game-io-workshops/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/game-io-workshops/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/game-io-workshops/js/main.js"></script>
    
  







    </body>
</html>
