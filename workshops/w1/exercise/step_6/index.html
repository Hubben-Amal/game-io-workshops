<!DOCTYPE html>
<html lang="en">
    <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
    <head>
    <meta charset="utf-8" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover" name="viewport">

    <title>
         Game Over 
    </title>

    <meta name="author" content="Theo Dedeken" /> 

    <link rel="alternate" type="application/rss+xml" title="Game I/O - Game development workshops" href="hubben-amal.github.io/game-io-workshops/feed.xml" /> 
 
 
   
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />

    
    <link rel="stylesheet" href="/game-io-workshops/css/bootstrap.min.css" /> 
    <link rel="stylesheet" href="/game-io-workshops/css/bootstrap-social.css" /> 
    <link rel="stylesheet" href="/game-io-workshops/css/main.css" />    
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" /> 
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" />     

    <!-- Facebook OpenGraph tags -->
     
    <meta property="og:title" content="Game Over" />  
    <meta property="og:description" content="The final piece of the puzzle is to actually check whether the ball touches the pillar to see if the game should be over. ## Non playing state Firstly we will add a state to the game that indicates that we are not playing so we can display the gameover..."> 


    <meta content="website" property="og:type" /> 
    <meta property="og:url" content="hubben-amal.github.io/game-io-workshops/workshops/w1/exercise/step_6/" />
    <link rel="canonical" href="hubben-amal.github.io/game-io-workshops/workshops/w1/exercise/step_6/" />  
    <meta property="og:image" content="hubben-amal.github.io/game-io-workshops/img/game-io-logo.png" /> 


    <!-- Twitter summary cards -->
    <meta content="summary" name="twitter:card" />
    <meta content="@" name="twitter:site" />
    <meta content="@" name="twitter:creator" /> 
    <meta name="twitter:title" content="Game Over" />  
    <meta name="twitter:description" content="The final piece of the puzzle is to actually check whether the ball touches the pillar to see if the game should be over. ## Non playing state Firstly we will add a state to the game that indicates that we are not playing so we can display the gameover...">  
    <meta name="twitter:image" content="hubben-amal.github.io/game-io-workshops/img/game-io-logo.png" />   

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="57x57" href=/game-io-workshops/apple-icon-57x57.png ">
    <link rel="apple-touch-icon " sizes="60x60 " href=/game-io-workshops/apple-icon-60x60.png ">
    <link rel="apple-touch-icon" sizes="72x72" href=/game-io-workshops/apple-icon-72x72.png ">
    <link rel="apple-touch-icon " sizes="76x76 " href=/game-io-workshops/apple-icon-76x76.png ">
    <link rel="apple-touch-icon" sizes="114x114" href=/game-io-workshops/apple-icon-114x114.png ">
    <link rel="apple-touch-icon " sizes="120x120 " href=/game-io-workshops/apple-icon-120x120.png ">
    <link rel="apple-touch-icon" sizes="144x144" href=/game-io-workshops/apple-icon-144x144.png ">
    <link rel="apple-touch-icon " sizes="152x152 " href=/game-io-workshops/apple-icon-152x152.png ">
    <link rel="apple-touch-icon" sizes="180x180" href=/game-io-workshops/apple-icon-180x180.png ">
    <link rel="icon " type="image/png " sizes="192x192 " href=/game-io-workshops/android-icon-192x192.png ">
    <link rel="icon" type="image/png" sizes="32x32" href=/game-io-workshops/favicon-32x32.png ">
    <link rel="icon " type="image/png " sizes="96x96 " href=/game-io-workshops/favicon-96x96.png ">
    <link rel="icon" type="image/png" sizes="16x16" href=/game-io-workshops/favicon-16x16.png ">
    <link rel="manifest " href=/game-io-workshops/manifest.json ">
    <meta content="#ffffff" name="msapplication-TileColor">
    <meta name="msapplication-TileImage" content=/game-io-workshops/ms-icon-144x144.png ">
    <meta content="#ffffff " name="theme-color ">

</head>

    <body>

        


        <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
    <div class="container-fluid">
        <div class="navbar-header">
            <button class="navbar-toggle" data-target="#main-navbar" data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button><a class="navbar-brand" href="/game-io-workshops/">Game I/O</a></div>

        <div class="collapse navbar-collapse" id="main-navbar">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/game-io-workshops/schedule">Schedule</a>
                </li>
                <li class="navlinks-container">
                    <a class="navlinks-parent" href="javascript:void(0)">Workshops</a>
                    <div class="navlinks-children">
                        <a href="/game-io-workshops/workshops/w1/index">W1 - Basics</a>
                        <a href="/game-io-workshops/workshops/w2/index">W2 - Phaser Systems</a>
                    </div>
                </li>
                
                <li class="navlinks-container">
                    <a class="navlinks-parent" href="javascript:void(0)">Additional resources</a>
                    <div class="navlinks-children">
                        <a href="/game-io-workshops/additional/javascript">Learning Javascript</a>
                        <a href="https://photonstorm.github.io/phaser3-docs/">Phaser documentation</a>
                        <a href="https://jsfiddle.net/theodedeken/cxz8Ly1p/49/">Phaser quickstart</a>
                    </div>
                </li>
                
                <li>
                    <a href="https://www.theodedeken.xyz">Author's home</a>
                </li></ul>
        </div>

        
        <div class="avatar-container">
            <div class="avatar-img-border">
                <a href="/game-io-workshops/">
                    <img class="avatar-img" src="/game-io-workshops/img/game-io-logo.png" />
                </a>
            </div>
        </div>
        

    </div>
</nav>

        <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-heading">
          <h1>Game Over</h1>
		  
		  
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p>The final piece of the puzzle is to actually check whether the ball touches the pillar to see if the game should be over.</p>

<h2 id="non-playing-state">Non playing state</h2>
<p>Firstly we will add a state to the game that indicates that we are not playing so we can display the gameover message.
We will use the space bar to start a new game.
Make these changes in the <code class="highlighter-rouge">create</code> and <code class="highlighter-rouge">update</code> functions.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// declaring the infotext variable</span>
<span class="kd">let</span> <span class="nx">infotext</span><span class="p">;</span>
<span class="c1">// declaring the gamestate variable</span>
<span class="kd">let</span> <span class="nx">playing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="kd">function</span> <span class="nx">create</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="c1">// displaying info at the start of the game</span>
    <span class="nx">infotext</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span>
        <span class="mi">50</span><span class="p">,</span> 
        <span class="mi">400</span><span class="p">,</span> 
        <span class="s1">'Press space to start game'</span><span class="p">,</span> 
        <span class="p">{</span> <span class="na">fontFamily</span><span class="p">:</span> <span class="s1">'"Arial"'</span><span class="p">,</span> <span class="na">fontSize</span><span class="p">:</span> <span class="s2">"20pt"</span><span class="p">}</span>
    <span class="p">);</span>
<span class="p">}</span> 

<span class="c1">// ...</span>

<span class="kd">function</span> <span class="nx">update</span><span class="p">()</span> <span class="p">{</span>   
    <span class="k">if</span> <span class="p">(</span><span class="nx">playing</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">jumping</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// we can only jump if space is down and isn't locked</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">isDown</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">keylock</span><span class="p">){</span>
                <span class="nx">jump</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="c1">// unlock space</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">isUp</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">keylock</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>             
        <span class="p">}</span> 

        <span class="c1">// moving pillar towards the ball</span>
        <span class="nx">pillar</span><span class="p">.</span><span class="nx">setX</span><span class="p">(</span><span class="nx">pillar</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">5</span><span class="p">);</span>

        <span class="c1">// the pillar is past the ball</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">pillar</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">){</span>
            <span class="nx">scoreOnePoint</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="c1">// if we are not playing and space is pressed we start the game</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">isDown</span><span class="p">){</span>
            <span class="nx">playing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="c1">// hiding the infotext when playing</span>
            <span class="nx">infotext</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="game-over">Game over</h2>
<p>Lastly we will check if the ball touches the pillar and end the game when that is the case.
Also we will reset the game such that the player can restart immediately.</p>

<p>For the collision detection we will use a very simple approach as our game is not too complex.
For bigger games you should probably use the builtin physics functions to check for collisions.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// if the pillar is under the ball and the ball is not in the air</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">pillar</span><span class="p">.</span><span class="nx">x</span> <span class="o">==</span> <span class="mi">100</span> <span class="o">&amp;&amp;</span> <span class="nx">ball</span><span class="p">.</span><span class="nx">y</span> <span class="o">==</span> <span class="mi">370</span><span class="p">){</span>
    <span class="nx">gameover</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Try to figure out where in the update function to put this collision check. 
Then also add the code that handle the gameover and reset of the gamestate</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">gameover</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Game is over, so we are not playing</span>
    <span class="nx">playing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="c1">// Display the final score</span>
    <span class="nx">infotext</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s1">'Final score '</span> <span class="o">+</span> <span class="nx">score</span> <span class="o">+</span> <span class="s1">', press space to start a new game'</span><span class="p">;</span>
    <span class="nx">infotext</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="c1">// reset the game</span>
    <span class="nx">resetGame</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">resetGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// score back to one</span>
    <span class="nx">score</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">scoretext</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
    <span class="c1">// pillar to initial position</span>
    <span class="nx">pillar</span><span class="p">.</span><span class="nx">setPosition</span><span class="p">(</span><span class="mi">700</span><span class="p">,</span> <span class="mi">340</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div></div>

<p>That should be it to get our basic game working.</p>

        <ul class="pager blog-pager">
        
        <li class="previous">
            <a href="/game-io-workshops/workshops/w1/exercise/step_5" data-toggle="tooltip" data-placement="top" title="Previous step">&larr; Previous Step</a>
        </li>
        
        
        <li class="next">
            <a href="/game-io-workshops/workshops/w1/exercise/step_7" data-toggle="tooltip" data-placement="top" title="Next step">Next Step &rarr;</a>
        </li>
        
        </ul>
    </div>
  </div>
</div>




        <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/game-io-workshops/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="mailto:theo.dedeken@amal.se" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li><li><a href="https://github.com/theodedeken" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li><li><a href="https://twitter.com/theodedeken" title="Twitter"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Twitter</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Theo Dedeken
      &nbsp;&bull;&nbsp;
      2020

      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="https://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>


        


  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
          document.write('<script src="/game-io-workshops/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/game-io-workshops/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/game-io-workshops/js/main.js"></script>
    
  







    </body>
</html>
